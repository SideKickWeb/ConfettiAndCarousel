import{u as I,_ as S,a as F}from"./BvGU_pER.js";import{_ as T}from"./CtFe8zgF.js";import{_ as B,r as O,g as L,c as a,b as _,a as t,q as l,m as P,w as k,F as y,s as h,t as c,A as V,o as n,d as b,p as g}from"./DPqVHIb4.js";import"./BY4aLptK.js";const Q={class:"page-wrapper"},$={class:"content"},R={class:"basket-content"},M={key:0,class:"empty-basket"},Y={key:1,class:"basket-items-container"},j={class:"basket-items"},A={class:"item-image"},D=["src","alt"],E={key:1,class:"no-image"},H={class:"item-details"},z={key:0,class:"item-category"},G={class:"item-price"},J={key:1,class:"item-options"},K={class:"item-actions"},U={class:"quantity-selector"},W=["onClick","disabled"],X={class:"quantity"},Z=["onClick"],tt={class:"item-total"},st=["onClick"],et={class:"basket-summary"},ot={class:"summary-body"},at={class:"summary-row"},nt={class:"summary-total"},ct={class:"summary-actions"},it=["disabled"],dt={class:"toast-container"},lt={class:"toast-icon"},rt={__name:"basket",setup(ut){const f=V(),i=I(),u=O([]);L(()=>{i.loadFromLocalStorage()});const p=o=>parseFloat(o||0).toFixed(2),w=o=>{i.updateQuantity(o.id,o.quantity+1),v("Item quantity updated","success")},x=o=>{o.quantity>1&&(i.updateQuantity(o.id,o.quantity-1),v("Item quantity updated","success"))},C=o=>{i.removeItem(o),v("Item removed from basket","success")},q=()=>{i.hasItems&&f.push("/checkout")},v=(o,s="success")=>{const m={message:o,type:s};u.value.push(m),setTimeout(()=>{const r=u.value.indexOf(m);r!==-1&&u.value.splice(r,1)},3e3)};return(o,s)=>{const m=S,r=T,N=F;return n(),a("div",Q,[_(m),t("div",$,[s[9]||(s[9]=t("div",{class:"basket-header"},[t("div",{class:"header-content"},[t("h1",null,"Your Shopping Basket"),t("p",null,"Review and manage the items in your basket")])],-1)),t("div",R,[l(i).hasItems?(n(),a("div",Y,[t("div",j,[(n(!0),a(y,null,h(l(i).items,e=>(n(),a("div",{key:e.id,class:"basket-item"},[t("div",A,[e.product.image?(n(),a("img",{key:0,src:e.product.image,alt:e.product.name},null,8,D)):(n(),a("div",E,s[2]||(s[2]=[t("span",null,"No image",-1)])))]),t("div",H,[t("h3",null,c(e.product.name),1),e.product.categoryName?(n(),a("p",z,c(e.product.categoryName),1)):g("",!0),t("p",G,"£"+c(p(e.product.price)),1),e.customOptions&&e.customOptions.length?(n(),a("div",J,[s[3]||(s[3]=t("p",{class:"options-title"},"Options:",-1)),t("ul",null,[(n(!0),a(y,null,h(e.customOptions,d=>(n(),a("li",{key:d.optionId},c(d.optionName)+": "+c(d.value),1))),128))])])):g("",!0)]),t("div",K,[t("div",U,[t("button",{type:"button",onClick:d=>x(e),class:"quantity-btn",disabled:e.quantity<=1},"-",8,W),t("span",X,c(e.quantity),1),t("button",{type:"button",onClick:d=>w(e),class:"quantity-btn"},"+",8,Z)]),t("div",tt," £"+c(p(e.product.price*e.quantity)),1),t("button",{type:"button",onClick:d=>C(e.id),class:"remove-btn"}," Remove ",8,st)])]))),128))]),t("div",et,[s[8]||(s[8]=t("div",{class:"summary-header"},[t("h2",null,"Order Summary")],-1)),t("div",ot,[t("div",at,[t("span",null,"Subtotal ("+c(l(i).itemCount)+" items)",1),t("span",null,"£"+c(p(l(i).totalPrice)),1)]),s[5]||(s[5]=t("div",{class:"summary-row"},[t("span",null,"Shipping"),t("span",null,"Calculated at checkout")],-1)),t("div",nt,[s[4]||(s[4]=t("span",null,"Total",-1)),t("span",null,"£"+c(p(l(i).totalPrice)),1)]),s[6]||(s[6]=t("div",{class:"summary-notice"},[t("p",null,"Final price and shipping costs will be confirmed at checkout.")],-1))]),t("div",ct,[t("button",{type:"button",onClick:q,class:"checkout-button",disabled:!l(i).hasItems}," Proceed to Checkout ",8,it),_(r,{to:"/products",class:"continue-shopping"},{default:k(()=>s[7]||(s[7]=[b(" Continue Shopping ")])),_:1})])])])):(n(),a("div",M,[s[1]||(s[1]=P('<div class="empty-basket-icon" data-v-edc437a8><svg xmlns="http://www.w3.org/2000/svg" width="64" height="64" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round" data-v-edc437a8><circle cx="9" cy="21" r="1" data-v-edc437a8></circle><circle cx="20" cy="21" r="1" data-v-edc437a8></circle><path d="M1 1h4l2.68 13.39a2 2 0 0 0 2 1.61h9.72a2 2 0 0 0 2-1.61L23 6H6" data-v-edc437a8></path></svg></div><h2 data-v-edc437a8>Your basket is empty</h2><p data-v-edc437a8>Looks like you haven&#39;t added any items to your basket yet.</p>',3)),_(r,{to:"/products",class:"primary-button"},{default:k(()=>s[0]||(s[0]=[b(" Browse Products ")])),_:1})]))])]),t("div",dt,[(n(!0),a(y,null,h(u.value,(e,d)=>(n(),a("div",{key:d,class:"toast"},[t("span",lt,c(e.type==="success"?"✓":"ℹ️"),1),t("span",null,c(e.message),1)]))),128))]),_(N)])}}},yt=B(rt,[["__scopeId","data-v-edc437a8"]]);export{yt as default};
