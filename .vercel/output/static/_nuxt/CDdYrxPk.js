import{u as I,_ as N,a as Y}from"./BvGU_pER.js";import{_ as A}from"./CtFe8zgF.js";import{_ as F,r as u,g as M,A as O,c as p,b as v,a as t,p as T,q as h,w as k,v as B,F as D,s as U,t as i,y as d,z as m,m as $,D as R,d as n,o as c}from"./DPqVHIb4.js";import{u as E}from"./BY4aLptK.js";const L={class:"page-wrapper"},j={class:"content"},z={class:"checkout-content"},W={key:0,class:"empty-checkout"},G={class:"order-summary"},H={class:"order-items"},J={class:"item-name"},K={class:"item-quantity"},Q={class:"item-price"},X={class:"order-total"},Z={class:"checkout-section"},ee={class:"form-group"},te={class:"form-grid"},oe={class:"form-group"},se={class:"form-group"},re={class:"checkout-section"},ae={class:"form-group"},ne={class:"form-grid"},le={class:"form-group"},ie={class:"form-group"},de={class:"checkout-section"},ue={class:"acknowledgment-wrapper"},pe={class:"checkbox-container"},me={class:"checkout-actions"},ce=["disabled"],ve={key:2,class:"order-confirmation"},fe={__name:"checkout",setup(be){const C=O(),r=I(),f=E(),s=u({name:"",email:"",phone:""}),l=u({address:"",city:"",postalCode:""}),b=u(!1),w=u(!1),_=u(""),y=u(!1);M(()=>{f.isAuthenticated&&(s.value.name=`${f.firstName||""} ${f.lastName||""}`.trim(),s.value.email=f.email||""),r.loadFromLocalStorage(),r.hasItems||C.push("/products")});const x=a=>parseFloat(a||0).toFixed(2),S=()=>{const a=Date.now().toString().slice(-6),e=Math.floor(Math.random()*1e4).toString().padStart(4,"0");return`ORD-${a}-${e}`},P=async()=>{if(r.hasItems){b.value=!0;try{const a={customer:s.value,shipping:l.value,items:r.items,total:r.totalPrice,date:new Date};console.log("Order submitted:",a),await new Promise(e=>setTimeout(e,1500)),_.value=S(),r.clearCart(),w.value=!0}catch(a){console.error("Error submitting order:",a),alert("There was an error processing your order. Please try again.")}finally{b.value=!1}}};return(a,e)=>{const q=N,g=A,V=Y;return c(),p("div",L,[v(q),t("div",j,[e[31]||(e[31]=t("div",{class:"checkout-header"},[t("div",{class:"header-content"},[t("h1",null,"Checkout"),t("p",null,"Complete your purchase")])],-1)),t("div",z,[h(r).hasItems?(c(),p("form",{key:1,onSubmit:B(P,["prevent"]),class:"checkout-form"},[t("div",G,[e[11]||(e[11]=t("h2",null,"Order Summary",-1)),t("div",H,[(c(!0),p(D,null,U(h(r).items,o=>(c(),p("div",{key:o.id,class:"order-item"},[t("div",J,[t("span",null,i(o.product.name),1),t("span",K,"x"+i(o.quantity),1)]),t("div",Q,"£"+i(x(o.product.price*o.quantity)),1)]))),128))]),t("div",X,[e[10]||(e[10]=t("span",null,"Total",-1)),t("span",null,"£"+i(x(h(r).totalPrice)),1)])]),t("div",Z,[e[15]||(e[15]=t("h2",null,"Your Information",-1)),t("div",ee,[e[12]||(e[12]=t("label",{for:"name"},"Full Name",-1)),d(t("input",{type:"text",id:"name","onUpdate:modelValue":e[0]||(e[0]=o=>s.value.name=o),required:"",placeholder:"Your full name"},null,512),[[m,s.value.name]])]),t("div",te,[t("div",oe,[e[13]||(e[13]=t("label",{for:"email"},"Email",-1)),d(t("input",{type:"email",id:"email","onUpdate:modelValue":e[1]||(e[1]=o=>s.value.email=o),required:"",placeholder:"Your email address"},null,512),[[m,s.value.email]])]),t("div",se,[e[14]||(e[14]=t("label",{for:"phone"},"Phone",-1)),d(t("input",{type:"tel",id:"phone","onUpdate:modelValue":e[2]||(e[2]=o=>s.value.phone=o),required:"",placeholder:"Your phone number"},null,512),[[m,s.value.phone]])])])]),t("div",re,[e[19]||(e[19]=t("h2",null,"Shipping Address",-1)),t("div",ae,[e[16]||(e[16]=t("label",{for:"address"},"Street Address",-1)),d(t("input",{type:"text",id:"address","onUpdate:modelValue":e[3]||(e[3]=o=>l.value.address=o),required:"",placeholder:"Street address"},null,512),[[m,l.value.address]])]),t("div",ne,[t("div",le,[e[17]||(e[17]=t("label",{for:"city"},"City",-1)),d(t("input",{type:"text",id:"city","onUpdate:modelValue":e[4]||(e[4]=o=>l.value.city=o),required:"",placeholder:"City"},null,512),[[m,l.value.city]])]),t("div",ie,[e[18]||(e[18]=t("label",{for:"postalCode"},"Postal Code",-1)),d(t("input",{type:"text",id:"postalCode","onUpdate:modelValue":e[5]||(e[5]=o=>l.value.postalCode=o),required:"",placeholder:"Postal code"},null,512),[[m,l.value.postalCode]])])])]),t("div",de,[e[22]||(e[22]=$('<h2 data-v-d0e3eeb3>Payment Method</h2><p class="payment-info" data-v-d0e3eeb3> Payment will be collected after your order has been reviewed and confirmed by our team. We&#39;ll contact you with payment instructions once your order is approved. </p><div class="disclaimer-box" data-v-d0e3eeb3><h4 data-v-d0e3eeb3>Important Information</h4><ul data-v-d0e3eeb3><li data-v-d0e3eeb3><strong data-v-d0e3eeb3>Prices shown are not final.</strong> Customizations and additional product additions might change the total price based on your specific requirements.</li><li data-v-d0e3eeb3><strong data-v-d0e3eeb3>Availability is not guaranteed.</strong> Your order is subject to product availability and will be reviewed.</li><li data-v-d0e3eeb3><strong data-v-d0e3eeb3>Confirmation process:</strong> After submitting this request, our team will review your order, confirm availability, and contact you for payment.</li><li data-v-d0e3eeb3><strong data-v-d0e3eeb3>Your order is only guaranteed</strong> after payment is received and confirmed by our team.</li></ul></div>',3)),t("div",ue,[t("label",pe,[d(t("input",{type:"checkbox","onUpdate:modelValue":e[6]||(e[6]=o=>y.value=o),required:""},null,512),[[R,y.value]]),e[20]||(e[20]=t("span",{class:"checkmark"},null,-1)),e[21]||(e[21]=t("span",{class:"acknowledgment-text"},[n("I have read and acknowledge the "),t("strong",null,"important information"),n(" above regarding pricing, availability, confirmation process, and that my order is only guaranteed after payment is received and confirmed.")],-1))])])]),t("div",me,[t("button",{type:"submit",class:"place-order-btn",disabled:b.value||!y.value},i(b.value?"Processing...":"Place Order"),9,ce),v(g,{to:"/basket",class:"back-to-basket"},{default:k(()=>e[23]||(e[23]=[n(" Back to Basket ")])),_:1})])],32)):(c(),p("div",W,[e[8]||(e[8]=t("h2",null,"Your basket is empty",-1)),e[9]||(e[9]=t("p",null,"Add some products to your basket before proceeding to checkout.",-1)),v(g,{to:"/products",class:"primary-button"},{default:k(()=>e[7]||(e[7]=[n(" Browse Products ")])),_:1})])),w.value?(c(),p("div",ve,[e[28]||(e[28]=t("div",{class:"confirmation-icon"},[t("svg",{xmlns:"http://www.w3.org/2000/svg",width:"64",height:"64",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"},[t("path",{d:"M22 11.08V12a10 10 0 1 1-5.93-9.14"}),t("polyline",{points:"22 4 12 14.01 9 11.01"})])],-1)),e[29]||(e[29]=t("h2",null,"Thank You For Your Order!",-1)),e[30]||(e[30]=t("p",null,"Your order has been received and is being processed.",-1)),t("p",null,[e[24]||(e[24]=n("Order reference: ")),t("strong",null,i(_.value),1)]),t("p",null,[e[25]||(e[25]=n("A confirmation email has been sent to ")),t("strong",null,i(s.value.email),1),e[26]||(e[26]=n("."))]),v(g,{to:"/products",class:"primary-button"},{default:k(()=>e[27]||(e[27]=[n(" Continue Shopping ")])),_:1})])):T("",!0)])]),v(V)])}}},we=F(fe,[["__scopeId","data-v-d0e3eeb3"]]);export{we as default};
